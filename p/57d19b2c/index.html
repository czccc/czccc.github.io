<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>SQL 必知必会 - 单表查询/过滤/汇总 - CZCC</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="CZCC"><meta name="msapplication-TileImage" content="/img/favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="CZCC"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="SQL 必知必会 - 全书目录  第 01 - 10 章：SQL 必知必会 - 单表查询&amp;#x2F;过滤&amp;#x2F;汇总 第 11 - 24 章：SQL 必知必会 - 多表查询&amp;#x2F;联结&amp;#x2F;组合 第 15 - 24 章：SQL 必知必会 - 数据更新&amp;#x2F;存储&amp;#x2F;事务"><meta property="og:type" content="blog"><meta property="og:title" content="SQL 必知必会 - 单表查询/过滤/汇总"><meta property="og:url" content="http://blog.czccc.cc/p/57d19b2c/"><meta property="og:site_name" content="CZCC"><meta property="og:description" content="SQL 必知必会 - 全书目录  第 01 - 10 章：SQL 必知必会 - 单表查询&amp;#x2F;过滤&amp;#x2F;汇总 第 11 - 24 章：SQL 必知必会 - 多表查询&amp;#x2F;联结&amp;#x2F;组合 第 15 - 24 章：SQL 必知必会 - 数据更新&amp;#x2F;存储&amp;#x2F;事务"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://s1.ax1x.com/2020/08/02/atfxMV.png"><meta property="article:published_time" content="2020-08-02T03:42:44.000Z"><meta property="article:modified_time" content="2022-08-06T13:07:33.621Z"><meta property="article:author" content="Cheng"><meta property="article:tag" content="SQL"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://s1.ax1x.com/2020/08/02/atfxMV.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://blog.czccc.cc/p/57d19b2c/"},"headline":"SQL 必知必会 - 单表查询/过滤/汇总","image":["https://s1.ax1x.com/2020/08/02/atfxMV.png"],"datePublished":"2020-08-02T03:42:44.000Z","dateModified":"2022-08-06T13:07:33.621Z","author":{"@type":"Person","name":"Cheng"},"publisher":{"@type":"Organization","name":"CZCC","logo":{"@type":"ImageObject","url":"http://blog.czccc.cc/img/logo.ico"}},"description":"SQL 必知必会 - 全书目录  第 01 - 10 章：SQL 必知必会 - 单表查询&#x2F;过滤&#x2F;汇总 第 11 - 24 章：SQL 必知必会 - 多表查询&#x2F;联结&#x2F;组合 第 15 - 24 章：SQL 必知必会 - 数据更新&#x2F;存储&#x2F;事务"}</script><link rel="canonical" href="http://blog.czccc.cc/p/57d19b2c/"><link rel="alternate" href="/atom.xml" title="CZCC" type="application/atom+xml"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }
          Array
              .from(document.querySelectorAll('.tab-content'))
              .forEach($tab => {
                  $tab.classList.add('is-hidden');
              });
          Array
              .from(document.querySelectorAll('.tabs li'))
              .forEach($tab => {
                  $tab.classList.remove('is-active');
              });
          const $activeTab = document.querySelector(location.hash);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
          const $tabMenu = document.querySelector(`a[href="${location.hash}"]`);
          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.1.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.ico" alt="CZCC" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/categories/LeetCode">LeetCode</a><a class="navbar-item" href="/Software">Software</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/czccc/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-9-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><h1 class="title is-3 is-size-4-mobile"><i class="fas fa-angle-double-right">  </i>SQL 必知必会 - 单表查询/过滤/汇总</h1><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-alt">  </i><span class="level-item"><time dateTime="2020-08-02T03:42:44.000Z" title="2020/8/2 11:42:44">2020-08-02</time>发表</span><i class="far fa-calendar-check">  </i><span class="level-item"><time dateTime="2022-08-06T13:07:33.621Z" title="2022/8/6 21:07:33">2022-08-06</time>更新</span><i class="far fa-folder">  </i><span class="level-item"><a class="link-muted" href="/categories/SQL/">SQL</a></span><i class="far fa-hourglass">  </i><span class="level-item">25 分钟读完 (大约3743个字)</span><i class="far fa-eye">  </i><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><div class="content"><hr>
<blockquote>
<p>SQL 必知必会 - 全书目录</p>
<ol>
<li>第 01 - 10 章：<a href="/p/57d19b2c">SQL 必知必会 - 单表查询/过滤/汇总</a></li>
<li>第 11 - 24 章：<a href="/p/4c50c6b4">SQL 必知必会 - 多表查询/联结/组合</a></li>
<li>第 15 - 24 章：<a href="/p/3b57f622">SQL 必知必会 - 数据更新/存储/事务</a></li>
</ol>
</blockquote>
<span id="more"></span>
<h1>基础</h1>
<ul>
<li>SQL（发音为字母 S-Q-L 或 sequel）是 Structured Query Language（结构化查询语言）的缩写</li>
<li>SQL 是一种专门用来与数据库沟通的语言</li>
<li>标准 SQL 由 ANSI 标准委员会管理，从而称为 ANSI SQL</li>
<li>数据库（database）: 保存有组织的数据的容器（通常是一个文件或一组文件）</li>
<li>数据库软件应称为数据库管理系统（DBMS）</li>
<li>表（table）: 某种特定类型数据的结构化清单</li>
<li>模式（schema）: 关于数据库和表的布局及特性的信息</li>
<li>列（column）: 表中的一个字段, 所有表都是由一个或多个列组成的</li>
<li>行（row）: 表中的一个记录, 有时也称其为数据库记录（record）</li>
<li>数据类型: 所允许的数据的类型. 每个表列都有相应的数据类型, 它限制（或允许）该列中存储的数据</li>
<li>主键（primary key）: 一列（或一组列）, 其值能够唯一标识表中每一行</li>
<li>表中的任何列都可以作为主键，只要它满足以下条件：
<ul>
<li>任意两行都不具有相同的主键值</li>
<li>每一行都必须具有一个主键值（主键列不允许 <code>NULL</code> 值）</li>
<li>主键列中的值不允许修改或更新</li>
<li>主键值不能重用（如果某行从表中删除，它的主键不能赋给以后的新行）</li>
</ul>
</li>
</ul>
<h1>检索数据 - <code>SELECT</code></h1>
<ul>
<li>每句 SQL 语句都建议使用 <code>;</code> 结尾; 所有空格会被忽略</li>
<li>行内注释使用 <code>--</code> 或 <code>#</code> (一般不使用), 多行注释使用 <code>/* ... */</code></li>
<li>在<strong>不指定排序</strong>的情况下, 输出没有特定的顺序</li>
<li>SQL 语句<strong>不区分大小写</strong>, 但习惯上对 SQL 的关键词使用大写, 对列名和表名使用小写</li>
<li>使用 <code>DISTINCT</code> 去重输出不同的值, 作用于所有的列</li>
<li>限制输出的结果数目:
<ul>
<li>SQL Server, Access: 使用 <code>TOP</code> 关键字</li>
<li>DB2: <code>FETCH FIRST 5 ROWS ONLY;</code></li>
<li>Oracle: <code>WHERE ROWNUM &lt;=5;</code></li>
<li>MySQL, MariaDB, PostgreSQL, SQLite: <code>LIMIT</code> 子句和 <code>OFFSET</code> 子句</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 检索单个列</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_name <span class="keyword">FROM</span> Products;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 检索多个列</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_id, prod_name, prod_price <span class="keyword">FROM</span> Products;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 检索所有列, 由于检索不需要的列, 会影响性能</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Products;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 去重输出, 在指定多个列时, 除非指定的两列完全相同，否则所有的行都会被检索出来</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> vend_id <span class="keyword">FROM</span> Products;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 限制输出结果, 不同的数据库实现方式不同</span></span><br><span class="line"><span class="comment">-- SQL Server, Access</span></span><br><span class="line"><span class="keyword">SELECT</span> TOP <span class="number">5</span> prod_name <span class="keyword">FROM</span> Products;</span><br><span class="line"><span class="comment">-- DB2</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_name <span class="keyword">FROM</span> Products <span class="keyword">FETCH</span> <span class="keyword">FIRST</span> <span class="number">5</span> <span class="keyword">ROWS</span> <span class="keyword">ONLY</span>;</span><br><span class="line"><span class="comment">-- Oracle</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_name <span class="keyword">FROM</span> Products <span class="keyword">WHERE</span> ROWNUM <span class="operator">&lt;=</span><span class="number">5</span>;</span><br><span class="line"><span class="comment">-- MySQL, MariaDB, PostgreSQL, SQLite</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_name <span class="keyword">FROM</span> Products LIMIT <span class="number">5</span>;</span><br><span class="line"><span class="keyword">SELECT</span> prod_name <span class="keyword">FROM</span> Products LIMIT <span class="number">5</span> <span class="keyword">OFFSET</span> <span class="number">5</span>;</span><br><span class="line"><span class="comment">-- MySQL, MariaDB: LIMIT 3 OFFSET 4 可简写为 LIMIT 4, 3</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_name <span class="keyword">FROM</span> Products LIMIT <span class="number">5</span>, <span class="number">5</span>;</span><br></pre></td></tr></table></figure>
<h1>排序检索数据 - <code>ORDER BY</code></h1>
<ul>
<li>在指定一条 <code>ORDER BY</code> 子句时，应该保证它是 <code>SELECT</code> 语句中最后一条子句</li>
<li>可以使用<strong>未检索的列</strong>进行排序</li>
<li>支持按<strong>相对列位置</strong>, 此时不能使用未检索的列进行排序</li>
<li>默认为 <code>ASC</code> 或 <code>ASCENDING</code> 升序排序, 降序排序使用 <code>DESC</code> 或 <code>DESCENDING</code></li>
<li><code>DESC</code> 关键字只应用到直接位于其前面的列名, 指定多个列时, <strong>每个列</strong>都需要 <code>DESC</code> 关键字</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> prod_name</span><br><span class="line"><span class="keyword">FROM</span> Products</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 先按 prod_price, 再按 prod_name 进行排序</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_id, prod_price, prod_name</span><br><span class="line"><span class="keyword">FROM</span> Products</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_price, prod_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 等同于上个例子</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_id, prod_price, prod_name</span><br><span class="line"><span class="keyword">FROM</span> Products</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="number">2</span>, <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 先按 prod_price 降序排序, 再按 prod_name 升序排序</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_id, prod_price, prod_name</span><br><span class="line"><span class="keyword">FROM</span> Products</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_price <span class="keyword">DESC</span>, prod_name;</span><br></pre></td></tr></table></figure>
<h1>过滤数据 - <code>WHERE</code></h1>
<ul>
<li>使用 <code>SELECT</code> 语句的 <code>WHERE</code> 子句指定搜索条件</li>
<li><code>WHERE</code> 语句支持的操作符如下图, 注意某些操作符是冗余的, 具体支持参阅对应的数据库软件实现</li>
<li><code>BETWEEN</code> 操作符需要两个值，即范围的<strong>开始值</strong>和<strong>结束值</strong></li>
<li><code>BETWEEN</code> 匹配范围中所有的值，<strong>包括</strong>指定的开始值和结束值</li>
<li>空值检查: 特殊的 <code>WHERE</code> 子句: <code>IS NULL</code> 子句</li>
<li><code>NULL</code> 和非匹配: 在进行匹配过滤或非匹配过滤时, 不会返回值为 <code>NULL</code> 的行。</li>
</ul>
<p><img src="https://s1.ax1x.com/2020/08/02/aJcuqA.png" alt="WHERE 子句操作符"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 一些常用的例子</span></span><br><span class="line"><span class="keyword">SELECT</span> vend_id, prod_name, prod_price</span><br><span class="line"><span class="keyword">FROM</span> Products</span><br><span class="line"><span class="keyword">WHERE</span> prod_price <span class="operator">=</span> <span class="number">3.49</span>;</span><br><span class="line"><span class="keyword">WHERE</span> prod_price <span class="operator">&lt;</span> <span class="number">10</span>;</span><br><span class="line"><span class="keyword">WHERE</span> prod_price <span class="operator">&lt;=</span> <span class="number">10</span>;</span><br><span class="line"><span class="keyword">WHERE</span> vend_id <span class="operator">&lt;&gt;</span> <span class="string">&#x27;DLL01&#x27;</span>;</span><br><span class="line"><span class="keyword">WHERE</span> vend_id <span class="operator">!=</span> <span class="string">&#x27;DLL01&#x27;</span>;</span><br><span class="line"><span class="keyword">WHERE</span> prod_price <span class="keyword">BETWEEN</span> <span class="number">5</span> <span class="keyword">AND</span> <span class="number">10</span>;</span><br><span class="line"><span class="keyword">WHERE</span> prod_price <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<h1>高级数据过滤 - <code>AND/OR/IN/NOT</code></h1>
<ul>
<li><code>SQL</code> 允许给出多个 <code>WHERE</code> 子句, 以 <code>AND</code> 子句或 <code>OR</code> 子句的方式使用</li>
<li><code>AND</code> 操作符用来指示检索<strong>匹配所有给定条件</strong>的行</li>
<li><code>OR</code> 操作符用来指示检索<strong>匹配任一条件</strong>的行</li>
<li>支持短路求值, <code>AND</code> 的优先级比 <code>OR</code> 高, 可使用<strong>圆括号</strong> <code>()</code> 手动指定优先级</li>
<li><code>IN</code> 操作符用来<strong>指定条件范围</strong>，范围中的每个条件都可以进行匹配
<ul>
<li>等同于 <code>OR</code> 操作符, 但 <code>IN</code> 操作符的语法更清楚，更直观。</li>
<li>在与其他 <code>AND</code> 和 <code>OR</code> 操作符组合使用 <code>IN</code> 时，求值顺序更容易管理</li>
<li><code>IN</code> 操作符一般比一组 <code>OR</code> 操作符执行得更快</li>
<li><code>IN</code> 的最大优点是可以包含其他 <code>SELECT</code> 语句，能够更动态地建立 <code>WHERE</code> 子句。</li>
</ul>
</li>
<li><code>NOT</code> 操作符<strong>否定其后所跟的任何条件</strong>, 总是与其他操作符一起使用
<ul>
<li>部分场景下也可用 <code>&lt;&gt;</code> 操作符来替代</li>
<li>在更复杂的子句中, <code>NOT</code> 是非常有用的</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> prod_id, prod_price, prod_name</span><br><span class="line"><span class="keyword">FROM</span> Products</span><br><span class="line"><span class="keyword">WHERE</span> vend_id <span class="operator">=</span> <span class="string">&#x27;DLL01&#x27;</span> <span class="keyword">AND</span> prod_price <span class="operator">&lt;=</span> <span class="number">4</span>;</span><br><span class="line"><span class="keyword">WHERE</span> vend_id <span class="operator">=</span> <span class="string">&#x27;DLL01&#x27;</span> <span class="keyword">OR</span> vend_id <span class="operator">=</span> <span class="string">&#x27;BRS01&#x27;</span>;</span><br><span class="line"><span class="keyword">WHERE</span> vend_id <span class="keyword">IN</span> ( <span class="string">&#x27;DLL01&#x27;</span>, <span class="string">&#x27;BRS01&#x27;</span> )</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> vend_id <span class="operator">=</span> <span class="string">&#x27;DLL01&#x27;</span></span><br></pre></td></tr></table></figure>
<h1>用通配符进行过滤 - <code>LIKE/%_[^]</code></h1>
<ul>
<li>利用通配符，可以创建<strong>比较特定数据</strong>的搜索模式, 用来匹配值的一部分</li>
<li>通配符搜索<strong>只能用于文本字段(字符串)</strong>, 非文本数据类型字段不能使用通配符搜索</li>
<li>百分号 <code>%</code> 通配符: 表示<strong>任何字符出现任意次数</strong>
<ul>
<li>Microsoft Access 中需要使用 <code>*</code></li>
<li>是否区分大小写与数据库有关</li>
<li>能匹配 0 个字符, 代表搜索模式中给定位置的 0 个、1 个或多个字符</li>
<li>许多 DBMS 都用空格来填补字段的内容, 使用 <code>%</code> 时需要考虑末尾填充的空格</li>
<li><code>%</code> 不会匹配产品名称为 <code>NULL</code> 的行</li>
</ul>
</li>
<li>下划线 <code>_</code> 通配符: <strong>只匹配单个字符</strong>
<ul>
<li>DB2 不支持通配符 <code>_</code>, Microsoft Access中需要使用 <code>?</code></li>
</ul>
</li>
<li>方括号 <code>[]</code> 通配符: 匹配方括号中任意单个字符
<ul>
<li>不是所有 DBMS 都支持用来创建集合的 <code>[]</code></li>
<li>可以用 <strong>前缀字符</strong> <code>^</code>（脱字号）来否定</li>
<li>Microsoft Access 中需要用 <code>!</code> 来否定</li>
</ul>
</li>
<li>通配符搜索一般比前面讨论的其他搜索要耗费更长的处理时间
<ul>
<li>不要过度使用通配符。如果其他操作符能达到相同的目的，应该使用其他操作符。</li>
<li>在确实需要使用通配符时，也尽量不要把它们用在搜索模式的开始处。把通配符置于开始处，搜索起来是最慢的。</li>
<li>仔细注意通配符的位置。如果放错地方，可能不会返回想要的数据。</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- %</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_id, prod_name</span><br><span class="line"><span class="keyword">FROM</span> Products</span><br><span class="line"><span class="keyword">WHERE</span> prod_name <span class="keyword">LIKE</span> <span class="string">&#x27;Fish%&#x27;</span>;           <span class="comment">-- 所有以词 Fish 起头的产品</span></span><br><span class="line"><span class="keyword">WHERE</span> prod_name <span class="keyword">LIKE</span> <span class="string">&#x27;%bean bag%&#x27;</span>;      <span class="comment">-- 所有包含 bean bag 的产品</span></span><br><span class="line"><span class="keyword">WHERE</span> prod_name <span class="keyword">LIKE</span> <span class="string">&#x27;F%y&#x27;</span>;             <span class="comment">-- 所有以 F 起头, 以 y 结尾的产品</span></span><br><span class="line"><span class="comment">-- _</span></span><br><span class="line"><span class="keyword">WHERE</span> prod_name <span class="keyword">LIKE</span> <span class="string">&#x27;__ inch teddy bear&#x27;</span>;</span><br><span class="line"><span class="comment">-- []</span></span><br><span class="line"><span class="keyword">SELECT</span> cust_contact</span><br><span class="line"><span class="keyword">FROM</span> Customers</span><br><span class="line"><span class="keyword">WHERE</span> cust_contact <span class="keyword">LIKE</span> <span class="string">&#x27;[JM]%&#x27;</span>         <span class="comment">-- 所有名字以 J 或 M 起头的联系人</span></span><br><span class="line"><span class="keyword">WHERE</span> cust_contact <span class="keyword">LIKE</span> <span class="string">&#x27;[^JM]%&#x27;</span>        <span class="comment">-- 所有名字不以 J 或 M 起头的联系人</span></span><br></pre></td></tr></table></figure>
<h1>创建计算字段 - <code>AS/+||</code></h1>
<ul>
<li>拼接字段: 将值联结到一起（将一个值附加到另一个值）构成单个值。
<ul>
<li>Access 和 SQL Server 使用 <code>+</code> 号</li>
<li>DB2, Oracle, PostgreSQL, SQLite 和 Open Office Base 使用 <code>||</code></li>
<li>MySQL 和 MariaDB 中使用特殊的函数 <code>Concat</code></li>
</ul>
</li>
<li>使用别名: 用 <code>AS</code> 关键字
<ul>
<li>有时也称为导出列 (derived column)</li>
</ul>
</li>
<li>执行算术计算: 支持 <code>+-*/</code>
<ul>
<li>圆括号可用来区分优先顺序</li>
<li>省略了 <code>FROM</code> 子句后就是简单地访问和处理表达式</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 拼接字段, 使用别名</span></span><br><span class="line"><span class="comment">-- RTRIM() 函数去掉值右边的所有空格, 还有 LTRIM(), TRIM()</span></span><br><span class="line"><span class="keyword">SELECT</span> RTRIM(vend_name) <span class="operator">+</span> <span class="string">&#x27; (&#x27;</span> <span class="operator">+</span> RTRIM(vend_country) <span class="operator">+</span> <span class="string">&#x27;)&#x27;</span></span><br><span class="line"><span class="keyword">SELECT</span> RTRIM(vend_name) <span class="operator">||</span> <span class="string">&#x27; (&#x27;</span> <span class="operator">||</span> RTRIM(vend_country) <span class="operator">||</span> <span class="string">&#x27;)&#x27;</span></span><br><span class="line"><span class="keyword">SELECT</span> Concat(RTRIM(vend_name), <span class="string">&#x27; (&#x27;</span>, RTRIM(vend_country), <span class="string">&#x27;)&#x27;</span>)</span><br><span class="line">    <span class="keyword">AS</span> vend_title</span><br><span class="line"><span class="keyword">FROM</span> Vendors</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> vend_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 执行算术计算</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_id,</span><br><span class="line">       quantity,</span><br><span class="line">       item_price,</span><br><span class="line">       quantity<span class="operator">*</span>item_price <span class="keyword">AS</span> expanded_price</span><br><span class="line"><span class="keyword">FROM</span> OrderItems</span><br><span class="line"><span class="keyword">WHERE</span> order_num <span class="operator">=</span> <span class="number">20008</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 直接计算</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">3</span> <span class="operator">*</span> <span class="number">2</span>;           <span class="comment">-- 6</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">Trim</span>(<span class="string">&#x27; abc &#x27;</span>);   <span class="comment">-- &#x27;abc&#x27;</span></span><br><span class="line"><span class="keyword">SELECT</span> Now();           <span class="comment">-- 当前日期和时间</span></span><br></pre></td></tr></table></figure>
<h1>使用函数处理数据 - 函数</h1>
<ul>
<li>只有少数几个函数被所有主要的 DBMS 等同地支持</li>
<li>与 SQL 语句不一样, SQL 函数不是可移植的</li>
<li>大多数 SQL 实现支持以下类型的函数
<ul>
<li>用于处理文本字符串（如删除或填充值，转换值为大写或小写）的文本函数
<ul>
<li><code>SOUNDEX()</code> 是一个将任何文本串转换为描述其语音表示的字母数字模式的算法</li>
</ul>
</li>
<li>用于在数值数据上进行算术操作（如返回绝对值，进行代数运算）的数值函数</li>
<li>用于处理日期和时间值并从这些值中提取特定成分（如返回两个日期之差，检查日期有效性）的日期和时间函数</li>
<li>返回 DBMS 正使用的特殊信息（如返回用户登录信息）的系统函数</li>
</ul>
</li>
</ul>
<p><img src="https://s1.ax1x.com/2020/08/02/aYGtIA.png" alt="DBMS 函数的差异"></p>
<p><img src="https://s1.ax1x.com/2020/08/02/aYG4MT.png" alt="常用的文本处理函数"></p>
<p><img src="https://s1.ax1x.com/2020/08/02/aYYdu8.png" alt="常用数值处理函数"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用 SOUNDEX() 函数进行搜索, 匹配所有发音类似于 Michael Green 的联系名：</span></span><br><span class="line"><span class="keyword">SELECT</span> cust_name, cust_contact</span><br><span class="line"><span class="keyword">FROM</span> Customers</span><br><span class="line"><span class="keyword">WHERE</span> SOUNDEX(cust_contact) <span class="operator">=</span> SOUNDEX(<span class="string">&#x27;Michael Green&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 检索 2012 年的所有订单</span></span><br><span class="line"><span class="keyword">SELECT</span> order_num</span><br><span class="line"><span class="keyword">FROM</span> Orders</span><br><span class="line"><span class="keyword">WHERE</span> DATEPART(yy, order_date) <span class="operator">=</span> <span class="number">2012</span>;      <span class="comment">-- SQL Server</span></span><br><span class="line"><span class="keyword">WHERE</span> DATEPART(<span class="string">&#x27;yyyy&#x27;</span>, order_date) <span class="operator">=</span> <span class="number">2012</span>;  <span class="comment">-- Access</span></span><br><span class="line"><span class="keyword">WHERE</span> DATE_PART(<span class="string">&#x27;year&#x27;</span>, order_date) <span class="operator">=</span> <span class="number">2012</span>; <span class="comment">-- PostgreSQL</span></span><br><span class="line"><span class="keyword">WHERE</span> to_number(to_char(order_date, <span class="string">&#x27;YYYY&#x27;</span>)) <span class="operator">=</span> <span class="number">2012</span>;   <span class="comment">-- Oracle</span></span><br><span class="line"><span class="keyword">WHERE</span> order_date <span class="keyword">BETWEEN</span> to_date(<span class="string">&#x27;01-01-2012&#x27;</span>)</span><br><span class="line">      <span class="keyword">AND</span> to_date(<span class="string">&#x27;12-31-2012&#x27;</span>);            <span class="comment">-- Oracle</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">YEAR</span>(order_date) <span class="operator">=</span> <span class="number">2012</span>;              <span class="comment">-- MySQL, MariaDB</span></span><br><span class="line"><span class="keyword">WHERE</span> strftime(<span class="string">&#x27;%Y&#x27;</span>, order_date) <span class="operator">=</span> <span class="string">&#x27;2012&#x27;</span>;  <span class="comment">-- SQLite</span></span><br></pre></td></tr></table></figure>
<h1>汇总数据 - 聚集函数</h1>
<ul>
<li>聚集函数: 汇总数据而不用把它们实际检索出来</li>
<li><code>AVG()</code> 只能用来确定特定数值列的平均值, 而且列名必须作为函数参数给出
<ul>
<li>只用于单个列</li>
<li>忽略列值为 <code>NULL</code> 的行</li>
</ul>
</li>
<li><code>COUNT()</code> 确定表中行的数目或符合特定条件的行的数目
<ul>
<li><code>COUNT(*)</code> 对表中行的数目进行计数，不管表列中包含的是空值（<code>NULL</code>）还是非空值</li>
<li><code>COUNT(column)</code> 对特定列中具有值的行进行计数，忽略 <code>NULL</code> 值。</li>
</ul>
</li>
<li><code>MAX()</code> / <code>MIN()</code> 返回指定列中的最大/小值, 要求指定列名, 忽略列值为 <code>NULL</code> 的行
<ul>
<li>允许将它用来返回任意列中的最大/小值</li>
</ul>
</li>
<li><code>SUM()</code> 用来返回指定列值的和（总计）, 忽略列值为 <code>NULL</code> 的行。</li>
<li>聚集不同值:
<ul>
<li>对所有行执行计算，指定 <code>ALL</code> 参数或不指定参数（因为 <code>ALL</code> 是默认行为）。</li>
<li>只包含不同的值，指定 <code>DISTINCT</code> 参数。</li>
<li><code>DISTINCT</code> 必须使用列名, 只能用于 <code>COUNT()</code>, <code>DISTINCT</code> 不能用于 <code>COUNT(*)</code></li>
</ul>
</li>
<li>组合聚集函数</li>
</ul>
<p><img src="https://s1.ax1x.com/2020/08/02/aYNuwD.png" alt="SQL 聚集函数"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 计算平均值</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(prod_price) <span class="keyword">AS</span> avg_price</span><br><span class="line"><span class="keyword">FROM</span> Products</span><br><span class="line"><span class="keyword">WHERE</span> vend_id <span class="operator">=</span> <span class="string">&#x27;DLL01&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 检索客人数目</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> num_cust</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(cust_email) <span class="keyword">AS</span> num_cust</span><br><span class="line"><span class="keyword">FROM</span> Customers;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 检索最高/低单价</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(prod_price) <span class="keyword">AS</span> max_price</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(prod_price) <span class="keyword">AS</span> min_price</span><br><span class="line"><span class="keyword">FROM</span> Products;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 计算总的订单金额</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(item_price<span class="operator">*</span>quantity) <span class="keyword">AS</span> total_price</span><br><span class="line"><span class="keyword">FROM</span> OrderItems</span><br><span class="line"><span class="keyword">WHERE</span> order_num <span class="operator">=</span> <span class="number">20005</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 特定供应商提供的产品的平均价格, 只考虑各个不同的价格</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(<span class="keyword">DISTINCT</span> prod_price) <span class="keyword">AS</span> avg_price</span><br><span class="line"><span class="keyword">FROM</span> Products</span><br><span class="line"><span class="keyword">WHERE</span> vend_id <span class="operator">=</span> <span class="string">&#x27;DLL01&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 同时使用多个聚集函数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>)        <span class="keyword">AS</span> num_items,</span><br><span class="line">       <span class="built_in">MIN</span>(prod_price) <span class="keyword">AS</span> price_min,</span><br><span class="line">       <span class="built_in">MAX</span>(prod_price) <span class="keyword">AS</span> price_max,</span><br><span class="line">       <span class="built_in">AVG</span>(prod_price) <span class="keyword">AS</span> price_avg</span><br><span class="line"><span class="keyword">FROM</span> Products;</span><br></pre></td></tr></table></figure>
<h1>分组数据 - <code>GROUP BY/HAVING</code></h1>
<ul>
<li>使用分组可以将数据分为多个逻辑组, 对每个组进行聚集计算</li>
<li>创建分组: 使用 <code>SELECT</code> 语句的 <code>GROUP BY</code> 子句
<ul>
<li>可以包含任意数目的列，因而可以对分组进行嵌套</li>
<li>如果在 <code>GROUP BY</code> 子句中嵌套了分组，数据将在最后指定的分组上进行汇总</li>
<li>列出的每一列都必须是检索列或有效的表达式, 不能使用别名</li>
<li>大多数 SQL 实现不允许 <code>GROUP BY</code> 列带有长度可变的数据类型</li>
<li><strong>除聚集计算语句外</strong>，<code>SELECT</code> 语句中的每一列都必须在 <code>GROUP BY</code> 子句中给出</li>
<li>如果分组列中包含具有 <code>NULL</code> 值的行，则 <code>NULL</code> 将作为一个分组返回. 如果列中有多行 <code>NULL</code> 值，它们将分为一组</li>
<li><code>GROUP BY</code> 子句必须出现在 <code>WHERE</code> 子句之后，<code>ORDER BY</code> 子句之前</li>
</ul>
</li>
<li>过滤分组: <code>HAVING</code> 子句
<ul>
<li><code>WHERE</code> 过滤指定的是行, <code>HAVING</code> 过滤指定的是分组</li>
<li><code>HAVING</code> 支持所有 <code>WHERE</code> 操作符</li>
<li><code>WHERE</code> 在数据分组前进行过滤, <code>HAVING</code> 在数据分组后进行过滤</li>
<li><code>WHERE</code> 排除的行不包括在分组中, 这可能会改变计算值, 从而影响 <code>HAVING</code> 子句中基于这些值过滤掉的分组</li>
<li>如果不指定 <code>GROUP BY</code>, 则大多数 DBMS 会同等对待它们</li>
</ul>
</li>
<li>分组和排序
<ul>
<li>一般在使用 <code>GROUP BY</code> 子句时, 应该也给出 <code>ORDER BY</code> 子句</li>
<li>这是保证数据正确排序的唯一方法, 千万不要仅依赖 <code>GROUP BY</code> 排序数据</li>
</ul>
</li>
</ul>
<p><img src="https://s1.ax1x.com/2020/08/02/atNuVS.png" alt="ORDER BY 与 GROUP BY"></p>
<p><img src="https://s1.ax1x.com/2020/08/02/atNJK0.png" alt="SELECT 子句及其顺序"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- GROUP BY 子句指示 DBMS 按 vend_id 排序并分组数据</span></span><br><span class="line"><span class="keyword">SELECT</span> vend_id, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> num_prods</span><br><span class="line"><span class="keyword">FROM</span> Products</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> vend_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 过滤出 COUNT(*) &gt;= 2（两个以上订单）的那些分组</span></span><br><span class="line"><span class="comment">-- 在这里无法使用 WHERE 语句, 因为过滤是基于分组聚集值, 而不是特定行的值</span></span><br><span class="line"><span class="keyword">SELECT</span> cust_id, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> orders</span><br><span class="line"><span class="keyword">FROM</span> Orders</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> cust_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">&gt;=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 列出具有两个以上产品且其价格都大于等于 4 的供应商</span></span><br><span class="line"><span class="comment">-- WHERE 子句过滤所有 prod_price 至少为4 的行</span></span><br><span class="line"><span class="comment">-- 然后按 vend_id 分组数据, HAVING 子句过滤计数为 2 或 2 以上的分组。</span></span><br><span class="line"><span class="keyword">SELECT</span> vend_id, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> num_prods</span><br><span class="line"><span class="keyword">FROM</span> Products</span><br><span class="line"><span class="keyword">WHERE</span> prod_price <span class="operator">&gt;=</span> <span class="number">4</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> vend_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">&gt;=</span> <span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<hr>
<blockquote>
<p>SQL 必知必会 - 全书目录</p>
<ol>
<li>第 01 - 10 章：<a href="/p/57d19b2c">SQL 必知必会 - 单表查询/过滤/汇总</a></li>
<li>第 11 - 24 章：<a href="/p/4c50c6b4">SQL 必知必会 - 多表查询/联结/组合</a></li>
<li>第 15 - 24 章：<a href="/p/3b57f622">SQL 必知必会 - 数据更新/存储/事务</a></li>
</ol>
</blockquote>
</div><div class="article-licensing box"><div class="licensing-title"><p>SQL 必知必会 - 单表查询/过滤/汇总</p><p><a href="http://blog.czccc.cc/p/57d19b2c/">http://blog.czccc.cc/p/57d19b2c/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>Cheng</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2020-08-02</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2022-08-06</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/SQL/">SQL</a></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><div class="social-share"></div><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/img/Alipay.jpg" alt="支付宝"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/img/WeChat_pay.png" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/p/4c50c6b4/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">SQL 必知必会 - 多表查询/联结/组合</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/p/90941d95/"><span class="level-item">改装 PowerShell</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'http://blog.czccc.cc/p/57d19b2c/';
            this.page.identifier = 'p/57d19b2c/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'czcc' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-3-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.jpg" alt="Cheng"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Cheng</p><p class="is-size-6 is-block">A Student</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Nanjing</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">54</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">26</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">50</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/czccc" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/czccc"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget column-left is-sticky" id="toc" data-type="toc"><div class="card-content"><div class="menu" style="max-height: calc(100vh - 5rem); overflow-y: auto;"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#"><span class="level-left"><span class="level-item">1</span><span class="level-item">基础</span></span></a></li><li><a class="level is-mobile" href="#"><span class="level-left"><span class="level-item">2</span><span class="level-item">检索数据 - SELECT</span></span></a></li><li><a class="level is-mobile" href="#"><span class="level-left"><span class="level-item">3</span><span class="level-item">排序检索数据 - ORDER BY</span></span></a></li><li><a class="level is-mobile" href="#"><span class="level-left"><span class="level-item">4</span><span class="level-item">过滤数据 - WHERE</span></span></a></li><li><a class="level is-mobile" href="#"><span class="level-left"><span class="level-item">5</span><span class="level-item">高级数据过滤 - AND/OR/IN/NOT</span></span></a></li><li><a class="level is-mobile" href="#"><span class="level-left"><span class="level-item">6</span><span class="level-item">用通配符进行过滤 - LIKE/%_[^]</span></span></a></li><li><a class="level is-mobile" href="#"><span class="level-left"><span class="level-item">7</span><span class="level-item">创建计算字段 - AS/+||</span></span></a></li><li><a class="level is-mobile" href="#"><span class="level-left"><span class="level-item">8</span><span class="level-item">使用函数处理数据 - 函数</span></span></a></li><li><a class="level is-mobile" href="#"><span class="level-left"><span class="level-item">9</span><span class="level-item">汇总数据 - 聚集函数</span></span></a></li><li><a class="level is-mobile" href="#"><span class="level-left"><span class="level-item">10</span><span class="level-item">分组数据 - GROUP BY/HAVING</span></span></a></li></ul></div></div><script src="/js/toc.js" defer></script></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.ico" alt="CZCC" height="28"></a><p class="is-size-7"><span>&copy; 2022 Cheng</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/czccc/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/mhchem.min.js" defer></script><script>window.addEventListener("load", function() {
            document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
                renderMathInElement(element);
            });
        });</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>